배치 + 스케줄러 방식
@Component
public class BatchScheduler {

    private final JobLauncher jobLauncher;
    private final Job job;

    public BatchScheduler(JobLauncher jobLauncher, Job job) {
        this.jobLauncher = jobLauncher;
        this.job = job;
    }

    @Scheduled(cron = "0 0 0 * * ?")
    public void runBatchJob() throws Exception {
        JobParameters jobParameters = new JobParametersBuilder()
                .addLong("time", System.currentTimeMillis())
                .toJobParameters();
        jobLauncher.run(job, jobParameters);
    }
}

Job 재실행
이미 수행된 job이 다시 실행되지 않을 수 있음.
job을 실행할 때마다 매번 실행되게 하려면, 이전에 job이 성공적으로 완료되었더라도 항상 새로운 실행을 트리거하도록 설정.

@Override  
public void run(String... args) throws Exception {  
    jobLauncher.run(youtubeApiJob, new JobParameters());  
}

@Override  
public void run(String... args) throws Exception {  
    try {  
        JobParameters jobParameters = new JobParametersBuilder()  
                .addLong("timestamp", System.currentTimeMillis())  
                .toJobParameters();  
  
        jobLauncher.run(youtubeApiJob, jobParameters);  
    } catch (Exception e) {  
        e.printStackTrace();  
    }  
}



고려할 사항
중복된 데이터를 넣지 않도록 해야한다.
배치로 주기마다 새로 받는다고 했을 때 중복된 데이터 들어갈 것은 고려하지 않아도 된다.
다만, 사용자에게 사라진 영상에 대해 어떠한 방식으로 알릴 것인지 생각해야한다.
VideoData - Video - 